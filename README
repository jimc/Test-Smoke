=head1 NAME

Perl Core Smoke Test Suite

=head1 SYNOPSIS

  # at 22:25
  sh smoke.sh [/usr/CPAN/perl-current [smoke.cfg]]
  #

  or for the brave and trustworthy

  # perl Makefile.PL

=head1 DESCRIPTION

The perl core smoke test suite is a set of simple scripts that try to
run the perl core tests on as many configurations as possible and combine
that into a easy to parse report.

The perl source tree is refreshed using rsync to the latest level of the
perl development branche before the smoke tests start. Note that rsync in
the smoke uses --delete, which <b>removes</b> any existing files on that
directory that are not part of the perl source tree.

=head1 INSTALLATION

Create an empty directory where the perl source tree is to be placed when
smoking (e.g. ~/perlsmoke/perl-current).

Create or use a location to put the three scripts needed for the smoke
(e.g. ~/perlsmoke/smoke), and put the files from the distribution there.
Probably you already did so, because you are reading this file.

Edit smoke.sh and change the PC= definition to reflect the location you
just chose in the first step of the initialisation. Theoretically you are
now ready to go, just follow the SYNOPSIS to give it a first shot for
tonight.

Optionally delete lines from config.sh (or a local copy with a different
name) for which you are certail your system doesn't support it (like
threading or 64bit configurations)

If something useful happens, do it every night using cron instead of at.

=head2 Win32 users

To make it clear, the perl core smoke suite treats B<cygwin> as a unixy
platform and not as true Win32.

We have tried to make this perl core smoke suite transparent for the use
with various Win32 C-compilers (MSVC, BCC, GCC) and provided separate
files for automation: B<smokew32.bat> and B<smokew32.cfg> please read
those before you start.

To sync up with the current perl source-tree you'll need a working
rsync (cygwin).

There is an issue with automatically sending the report to the
daily-build mailinglist, wich we hope is resolved in the next version.

=head1 Slow Systems

It can happen that your system is not able to persue all the tests, either
because it is too slow or because some of the configurations are not
supported by the system. At first, don't worry, they are detected by the
report creation script and shown as such.

After the first run gave you some idea of how long the smoke will run on
your system,  you can create your own copy of smoke.cfg where you either
add new combinations and/or test levels, or delete lines to speed up the
run time of smoke.

At the moment there are no guidelines of how to change the configuration
best to fit the needs of perl5-porters while still getting as much smoke
out of the test as possible, simply because the needs of perl5-porters
change over time :)

If the test captures too many cycles of your CPU to continue production
work, just kill the "mktest.pl" process and the report will be generated
over the results captured untill then.

=head1 Availability and references

=head2 Distribution

  $CPAN/authors/id/A/AB/ABELTJE/Test-Smoke-1.15.tgz
  SourceForge project "perl-qa" (depricated)

=head2 Mailing lists

  Perl general QA: perl-qa@perl.org
  Smoke reports:   daily-build@perl.org
  Development:     perl5-porters@perl.org

=head2 Archives and web

  http://qa.perl.org
  http://archives.develooper.com/daily-build@perl.org/ and/or
  news://nntp.perl.org/perl.daily-build
  http://www.cpan.org

=head1 COPYRIGHT and LICENCE

Copyright (C) 2002 H.Merijn Brand

This suite is free software; you can redistribute it and/or modify it
under the same terms as Perl itself, without consulting the author.

(Future) Co-Authors and or contributors should agree to this before
submitting patches.

=head1 AUTHOR

The perl core smoke suite is maintained by Abe Timmerman
<abeltje@cpan.org>.

H.Merijn Brand <h.m.brand@hccnet.nl> in dialogue and consultation with
Michael Schwern <schwern@pobox.com>, the Perl QA pumpkin.

Contributors and/or co-authors:

    Configurations and
      nuts and bolts	Nicholas Clark <nick@plum.flirble.org>
    Portability issues	Will Coleda - IMG <wjc@infomg.com>
    Safety		Richard Soderberg <rs@oregonnet.com>
    Win32/MSC5/dmake	Mattia Barbon <mbarbon@dsi.unive.it>,
			Abe Timmerman <abeltje@cpan.org>
    Cygwin		John Peacock <jpeacock@rowman.com>
    Sharing issues	Blair Zajac <blair@orcaware.com>

and all the people having useful suggestions and nits, starting at
YAPC::Europe-2.0.01, where Michael talked me into simplifying my own
test-suite.

=head1 Misc

As always, have the appropriate amount of fun

=head1 TODO

=over 4

=item Win32

Windows configurations are not as easy as Unix, but requires make
fiddling. Windows2000 however supports long names and <i>might</i>
just pick up the current way of going around without any hassle.

=item Initialisation and installation

Though I've tried to make Makefile.PL do what's neccasary, there's
probably still some issues to be fixed for non-unix operating systems

=item Plan

At this date (early September 2002) my plan for Test::Smoke is:

  - This release (1.15) minor fixes
  - VERSION 1.20, a wrapper script for fetching source-tree etc
  - VERSION 2.00, an objectified version for easier code maintenance

=back

=cut
